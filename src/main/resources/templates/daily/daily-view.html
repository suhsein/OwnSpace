<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/fragment/head :: common_head(~{::title}, ~{::link})}">
    <title>일상</title>
    <link rel="stylesheet" href="">
</head>
<body>
<div th:replace="~{fragment/navigation :: navigation ('daily')}"></div>
<div class="container mb-5" style="max-width: 80%">
    <h5 class="mt-3 fw-bold me-5 mb-3">게시물 상세 보기</h5>
    <hr>
    <h4 class="fw-bold me-5" th:text="${daily.title}"></h4>
    <div style="font-size:0.8rem">
        <span th:text="'작성자 ' + ${daily.writer == null ? '익명' : daily.writer.username}"></span>
        <span th:text="'  |  게시일 ' + ${#temporals.format(daily.createDate, 'yyyy.MM.dd HH:mm:ss')}"></span>
        <span th:text="'  |  조회수 ' + ${daily.views}"></span>
        <p th:if="${daily.updateDate != null}" th:text="'수정일 ' + ${#temporals.format(daily.updateDate, 'yyyy.MM.dd HH:mm:ss')}"></p>
    </div>
    <hr>
    <div th:utext="${daily.content}" class="mb-3"></div>
    <div class="d-flex justify-content-end">
        <button class="btn btn-primary me-2" th:onclick="|location.href='@{/daily/edit/{id}(id=${id})}'|">수정하기</button>
        <button class="btn btn-secondary" th:onclick="|location.href='@{/daily/delete/{id}(id=${id})}'|">삭제하기</button>
    </div>
    <hr>
    <h5>댓글</h5>
    <ul th:each="comment : ${daily.commentList}">
        <li>
            <span th:text="'작성자 ' + ${comment.writer == null ? '익명' : comment.writer.username}"></span>
            <span th:text="'  |  게시일 ' + ${#temporals.format(comment.createDate, 'yyyy.MM.dd HH:mm:ss')}"></span>
            <p th:if="${comment.updateDate != null}" th:text="'수정일 ' + ${#temporals.format(comment.updateDate, 'yyyy.MM.dd HH:mm:ss')}"></p>
            <p th:text="${comment.content}"></p>
            <button class="btn btn-danger"
                    th:onclick="|location.href='@{/daily/deleteComment/{id}/{commentId}(id=${id}, commentId=${comment.id})}'|">delete</button>
        </li>
    </ul>
    <div class="card">
        <div class="card-header">댓글 입력</div>
        <div class="card-body">
            <form th:action="@{/daily/addComment/{id}(id=${id})}" th:object="${commentForm}" method="post">
                <textarea th:field="*{content}" cols="30" rows="5" class="form-control"></textarea>
                <button class="btn btn-primary mt-2" type="submit">submit</button>
            </form>
        </div>
    </div>
</div>
<footer th:replace="~{/fragment/footer :: footer}"></footer>
<script src="./js/bootstrap.bundle.js" th:src="@{/js/bootstrap.bundle.js}"></script>
</body>
</html>