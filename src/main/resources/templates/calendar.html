<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>캘린더</title>
  <link rel="stylesheet" href="/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
  <link rel="stylesheet" href="/css/custom.css" th:href="@{/css/custom.css}">
  <link rel="stylesheet" href="/css/modal-map.css" th:href="@{/css/modal-map.css}">

</head>
<body>

<!-- modal -->
<div class="modal modal-lg fade" id="toDoModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="modal-name"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
      </div>
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <button class="nav-link active schedule_tabs" aria-current="page">일정입력</button>
        </li>
        <li class="nav-item">
          <button class="nav-link schedule_tabs">일정보기</button>
        </li>
      </ul>
      <div class="modal-body">
        <div class="schedule_tab_contents">
          <form action="">
            <label for="toDoTitle">제목</label>
            <input type="text" class="form-control" id="toDoTitle">
            <button type="button" class="btn btn-seablue my-2" onclick="openMapWrap()" id="openMap" style="display:block">지도 열기</button>
            <!--   수정 요함. 장소 정보 지도 api로 받아오기 / 시간 정보 select로 선택하기 -->
            <div class="map_wrap" style="display: none">
              <div class="row" style="font-size: 0.9rem">
                <div class="col col-9 pe-0">
                  <input type="text" id="mapSearchInput" class="form-control" style="display: inline" th:placeholder="|검색 장소를 입력해주세요.|">
                </div>
                <div class="col col-sm-3 ps-2">
                  <button type="button" id="mapSearch" class="btn btn-outline-info" style="display: inline">검색</button>
                  <button type="button" id="menuControl" class="btn btn-outline-secondary"
                          onclick="menuVisibility(this)">목록 열기</button>
                </div>
              </div>
              <div class="mt-3" id="map" style="width:100%; height: 20rem; position:relative; overflow:hidden">
                <div id="menu_wrap" style="visibility: hidden">
                  <ul id="placesList"></ul>
                  <div id="pagination"></div>
                </div>
              </div>
            </div>
            <label for="toDoPlace">장소</label>
            <input type="text" class="form-control" id="toDoPlace">
            <label for="toDoTime">시간</label>
            <input type="time" class="form-control" id="toDoTime">
            <label for="toDoInfo">상세 정보</label>
            <textarea class="form-control" id="toDoInfo" name="" cols="30" rows="10"></textarea>
          </form>
        </div>
        <div class="schedule_tab_contents" style="display: none">
          후루꾸
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Save Changes</button>
      </div>
    </div>
  </div>
</div>
<!-- /modal -->

<div class="navbar navbar-brand navbar-expand-lg" style="background: turquoise; border-bottom: 1px solid lightgray">
  <div class="container-fluid">
    <a th:href="@{/bbsMain}" class="navbar-brand ms-3 me-5 pt-0" style="color: #f8fff8">
      <img src="favicon.ico" alt="메인" style="width:1.5rem; height: 1.5rem">
    </a>
    <ul class="navbar-nav me-auto menu SMN_effect-3">
      <li class="nav-item">
        <a th:href="@{/login}">로그인</a>
      </li>
      <li class="nav-item">
        <a th:href="@{/signin}">회원가입</a>
      </li>
      <li class="nav-item ms-5">
        <a href="">사진</a>
      </li>
      <li class="nav-item ms-2">
        <a href="">일상</a>
      </li>
      <li class="nav-item ms-2">
        <a href="">가계부</a>
      </li>
      <li class="nav-item ms-2">
        <a th:href="@{/map}">지도</a>
      </li>
      <li class="nav-item ms-2 cur-menu">
        <a th:href="@{/calendar}">캘린더</a>
      </li>
    </ul>
    <select class="nav-item form-select form-select-sm me-2" style="max-width: 7rem">
      <option selected value="">제목+내용</option>
      <option value="">제목</option>
      <option value="">내용</option>
      <hr>
      <option value="">글쓴이</option>
    </select>
    <form class="d-flex nav-item">
      <input type="text" class="form-control me-2" placeholder="검색" aria-label="검색">
      <button class="btn text-white btn-seablue">검색</button>
    </form>
  </div> <!-- Navigation Bar -->
</div>
<div class="container" style="max-width: 80%">
  <h5 class="mt-3 fw-bold">캘린더</h5>
  <form class="date text-center" th:object="${date}" th:action method="post">
    <button class="btn btn-seablue btn-sm mb-2" style="border-radius: 1rem"
            name="action" value="prv" type="submit"><<</button>
    <input type="hidden" th:field="*{year}">
    <input type="hidden" th:field="*{month}">
    <span th:text="|*{year}년 *{month}월|" class="text-black" style="font-size: 1.5rem"></span>
    <button class="btn btn-seablue btn-sm mb-2" style="border-radius: 1rem"
            name="action" value="nxt" type="submit">>></button>
    <table class="table td-hover table-bordered mt-4 text-start" style="height: 33rem">
      <thead class="text-center">
      <tr class="table-seablue">
        <th scope="col" style="color: #dc3545;">일</th>
        <th scope="col">월</th>
        <th scope="col">화</th>
        <th scope="col">수</th>
        <th scope="col">목</th>
        <th scope="col">금</th>
        <th scope="col" style="color: #355cdc">토</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="curWeek: ${weeks}" style="height: 20%">
        <td th:each="day: ${curWeek.week}"
            th:attrappend="data-bs-toggle=${day != null}?'modal', data-bs-target=${day != null}?'#toDoModal',
                           data-month=${day!=null}?*{month}, data-day=${day!=null}?${day}">
          <span th:text="${day}" class="mb-0"></span>
          <button class="btn btn-primary" th:if="${day} != null" th:text="|${day}일입니다.|"
                  style="height: 1rem; padding: 0; font-size: 0.6rem"></button>
        </td>
      </tr>
      </tbody>
    </table>
  </form>

</div> <!-- /container -->
<!-- 카카오 지도 api . 자바스크립트 코드 -->
<script type="text/javascript" th:src="@{|//dapi.kakao.com/v2/maps/sdk.js?appkey=#{kakaoJsKey}&libraries=services|}"></script>
<script type="text/javascript" th:src="@{|//dapi.kakao.com/v2/maps/sdk.js?appkey=#{kakaoJsKey}|}"></script>
<script type="text/javascript" th:src="@{/js/mapService.js}"></script>
<script type="text/javascript" th:src="@{/js/calendarMapService.js}"></script>

<script src="./js/bootstrap.bundle.js" th:src="@{/js/bootstrap.bundle.js}"></script>
</body>
</html>